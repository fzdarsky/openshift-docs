= Accessing the MicroShift cluster
== Installing the OpenShift client

You can install the OpenShift CLI (oc) client on your {op-system} machine by running:

[source,terminal]
----
sudo dnf install -y openshift-clients
----

== Accessing the MicroShift cluster locally

To access the MicroShift cluster from the _same_ machine that is running MicroShift, copy the generated `kubeconfig` file to your user's `~/.kube/config` file:

[source,terminal]
----
mkdir -p ~/.kube/
sudo cat /var/lib/microshift/resources/kubeadmin/kubeconfig > ~/.kube/config
----

== Accessing the MicroShift cluster remotely

To access the MicroShift cluster from a _different_ machine from the one running MicroShift, use the following procedure:

1. Open the Kubernetes API port in the firewall of your MicroShift machine:

    MICROSHIFT_MACHINE=<user>@<name or IP of your MicroShift machine>
    ssh $MICROSHIFT_MACHINE "sudo firewall-cmd --permanent --zone=public --add-port=6443/tcp && sudo firewall-cmd --reload"

2. Copy the generated `kubeconfig` file from the MicroShift machine to your local machine:

    mkdir -p ~/.kube/
    ssh $MICROSHIFT_MACHINE "sudo cat /var/lib/microshift/resources/kubeadmin/kubeconfig" > ~/.kube/config

3. Replace the `server` field in your `kubeconfig` with the name or IP of your MicroShift machine:

    sed -i "s|server: https://127.0.0.1:6443|server: https://$MICROSHIFT_MACHINE:6443|" ~/.kube/config

Verify that MicroShift is up and running:

[source,terminal]
----
oc get all -A
----

> The first time the MicroShift service starts, it may take a few minutes to download and initialize MicroShift's container images. On subsequent starts, the MicroShift service should only take a few seconds to become available.
